# GruppyOnboarding - Sistema de Aprendizado e Avalia√ß√£o

Sistema completo de gest√£o de aprendizado e avalia√ß√£o de performance para colaboradores da Gruppy.

## Premissas

- **N√ÉO** crie novos arquivos de documenta√ß√£o a n√£o ser que seja solicitado explicitamente.
- Se for criar uma nova documenta√ß√£o **espec√≠fica**, coloque-a na pasta `docs/` e siga o padr√£o de nomenclatura existente.

## üõ†Ô∏è Comandos Principais

### Desenvolvimento
- `make start`: Inicia todos os servi√ßos (aplica√ß√£o + banco PostgreSQL via Docker)
- `make dev`: Inicia o servidor de desenvolvimento local (sem Docker)
- `make stop`: Para todos os servi√ßos
- `make restart`: Reinicia os servi√ßos
- `make build`: Rebuild das imagens Docker
- `make status`: Mostra status dos servi√ßos e health checks
- `make logs`: Mostra logs em tempo real de todos os servi√ßos
- `make logs-app`: Mostra logs apenas da aplica√ß√£o
- `make install`: Instala depend√™ncias npm

### Banco de Dados
- `make db-info`: Mostra informa√ß√µes de conex√£o do PostgreSQL
- `make db-shell`: Abre shell do PostgreSQL
- `make db-tables`: Lista todas as tabelas do banco
- `make backup`: Cria backup do banco de dados
- `make migrate`: Executa migra√ß√µes manualmente
- Schema definido em `shared/schema.ts` (Drizzle ORM)
- Migrations geradas em `migrations/` pelo Drizzle Kit
- **Local**: Configura√ß√£o via `drizzle.config.ts`
- **Produ√ß√£o**: Configura√ß√£o via `drizzle.config.aws.js` para AWS RDS

## üìÅ Estrutura do Projeto

```
client/          # Frontend React + Vite + TypeScript
‚îú‚îÄ‚îÄ src/         # C√≥digo React
‚îî‚îÄ‚îÄ index.html   # Template HTML

server/          # Backend Express + TypeScript
‚îú‚îÄ‚îÄ index.ts     # Servidor principal
‚îú‚îÄ‚îÄ routes.ts    # Rotas da API
‚îú‚îÄ‚îÄ db.ts        # Configura√ß√£o do banco
‚îî‚îÄ‚îÄ *.ts         # Servi√ßos e utilit√°rios

shared/          # C√≥digo compartilhado
‚îî‚îÄ‚îÄ schema.ts    # Schema Drizzle ORM

scripts/         # Scripts de migra√ß√£o e setup
kubernetes/      # Configura√ß√µes K8s
attached_assets/ # Arquivos anexos
```

## üéØ Tecnologias Principais

### Frontend
- **React 18** + TypeScript
- **Vite** (build tool)
- **Wouter** (routing)
- **TanStack Query** (estado/cache)
- **Radix UI** + **Tailwind CSS** (interface)
- **Framer Motion** (anima√ß√µes)

### Backend
- **Node.js** + **Express** + TypeScript
- **Drizzle ORM** (PostgreSQL)
- **Replit Auth** (autentica√ß√£o)
- **AWS S3** (arquivos)
- **OpenAI GPT-4o** (IA para avalia√ß√µes)

### Infraestrutura
- **Docker** + **Kubernetes**
- **AWS RDS PostgreSQL**
- **AWS S3** (storage)

## üìù Diretrizes de C√≥digo

### IMPORTANTE - Padr√µes Obrigat√≥rios
- **SEMPRE use ES modules** (`import/export`), NUNCA CommonJS (`require`)
- **SEMPRE destructure imports** quando poss√≠vel: `import { foo } from 'bar'`
- **SEMPRE use TypeScript** para novos arquivos
- **SEMPRE mantenha consist√™ncia** entre `client/` e `server/` para tipos compartilhados

### Estrutura de Arquivos
- Componentes React em `client/src/components/`
- Servi√ßos de backend em `server/`
- Schemas e tipos em `shared/schema.ts`
- Scripts de banco em arquivos `.sql` na raiz
- Scripts de migra√ß√£o em `scripts/`

### Estilo de C√≥digo
- Use **camelCase** para vari√°veis e fun√ß√µes
- Use **PascalCase** para componentes React
- Use **kebab-case** para arquivos e diret√≥rios
- Prefira **arrow functions** para componentes funcionais
- Use **const assertions** quando apropriado

## üóÉÔ∏è Banco de Dados

### Configura√ß√£o
- **Local**: PostgreSQL via `drizzle.config.ts`
- **Produ√ß√£o**: AWS RDS via `drizzle.config.aws.js`
- **ORM**: Drizzle ORM com TypeScript

### Migra√ß√µes
- Schemas definidos em `shared/schema.ts`
- Drizzle Kit gera migrations automaticamente em `migrations/`
- **Desenvolvimento**: Execute `make migrate` ou `npm run db:push`
- **Produ√ß√£o**: Use `npx drizzle-kit push` no ambiente de produ√ß√£o
- Scripts manuais de migra√ß√£o est√£o na raiz (`.sql` e `.js`)
- **IMPORTANTE**: O projeto usa Drizzle Kit Push (aplica mudan√ßas diretamente)

### IMPORTANTE - Dados Sens√≠veis
- **NUNCA commite** arquivos `.env*`
- **NUNCA commite** arquivos `cookies_*`
- **SEMPRE use** vari√°veis de ambiente para credenciais

## üîê Autentica√ß√£o & Seguran√ßa

- **Replit Auth** para autentica√ß√£o
- **Express Session** para sess√µes
- **bcrypt** para senhas
- **Passport.js** para estrat√©gias de login

## üß™ Testing & Debug

### Comandos de Debug
- `npm run check`: Verifica√ß√£o de tipos
- Logs de desenvolvimento em `server/index.ts`
- Use **console.log** temporariamente (remova antes do commit)

### Arquivos de Teste
- Scripts `.cjs` para testes espec√≠ficos
- Arquivos `test-*.ts` para valida√ß√µes
- Use `tsx` para executar TypeScript diretamente

## ‚ö†Ô∏è Comportamentos Espec√≠ficos

### Vite + Express
- Frontend e backend rodam juntos em desenvolvimento
- Build separado para produ√ß√£o
- Rotas da API em `/api/*`

### Drizzle ORM
- Schema √∫nico em `shared/schema.ts`
- Migra√ß√µes autom√°ticas com `db:push`
- **SEMPRE** que alterar um modelo, crie uma nova migra√ß√£o (migration)
- **CUIDADO**: Sempre backup antes de mudan√ßas em produ√ß√£o

### Replit Integration
- Configura√ß√£o espec√≠fica em `replit.md`
- Auth integrado com Replit
- Deploy autom√°tico configurado

## üîß Troubleshooting

### Problemas Comuns
1. **Erro de tipos**: Execute `npm run check`
2. **Banco n√£o conecta**: Execute `make db-info` e verifique `.env` e credenciais AWS
3. **Build falha**: Execute `make clean` e depois `make build`
4. **Docker n√£o inicia**: Execute `make status` para diagn√≥stico e verifique se Docker est√° rodando
5. **Servi√ßos n√£o respondem**: Use `make logs` para ver logs em tempo real
6. **Problemas de depend√™ncias**: Execute `make install` para reinstalar

### Arquivos de Refer√™ncia
- `TROUBLESHOOTING.md`: Guia detalhado de problemas
- `DEPLOYMENT.md`: Instru√ß√µes de deploy
- `AWS_RDS_*.md`: Configura√ß√£o de banco

## üìã Workflow

### Desenvolvimento
1. **SEMPRE** rode `npm run check` antes de commits
2. **PREFIRA** commits pequenos e frequentes
3. **DOCUMENTE** mudan√ßas importantes neste arquivo

### IMPORTANTE - Antes de Commit
- [ ] C√≥digo buildando sem erros (`npm run build` para verificar)
- [ ] Removidos logs e coment√°rios tempor√°rios

---

üí° **Dica**: Use `#` para adicionar instru√ß√µes que ser√£o automaticamente incorporadas neste arquivo!